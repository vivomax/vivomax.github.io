<!DOCTYPE html>
<html lang="zh-CN">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
   <meta name="referrer" content="no-referrer">
   <title>分享到其他群解锁后续</title>
   <style>
       * {
           box-sizing: border-box;
           margin: 0;
           padding: 0;
       }
       body {
           font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
           background-color: #f7f7f7;
           color: #333;
           line-height: 1.6;
           height: 100vh;
       }
       .container {
           height: 100%;
           display: flex;
           flex-direction: column;
           padding: 20px;
           background-color: #fff;
       }
       .logo {
           width: 70px;
           height: 70px;
           margin: 0 auto 15px;
           background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPjxwYXRoIGZpbGw9IiMwN0MxNjAiIGQ9Ik04OTYuMyAxNjEuN0M3OTMuOCA1OS4yIDY2Ni40IDAgNTEyIDAgMjI5LjIgMCAwIDIyOS4yIDAgNTEyczIyOS4yIDUxMiA1MTIgNTEyYzE1NC40IDAgMjgxLjgtNTkuMiAzODQuMy0xNjEuN0M5NjMuMSA3MzQuMSAxMDI0IDYwNi44IDEwMjQgNDUyLjRjMC0xNTQuNC02MC45LTI4MS44LTEyNy43LTI5MC43em0tNTcuNiA1ODcuOEMzOTYuMyA4ODkuNyAxMzQuNiA3MjggMTM0LjYgNTEyYzAtMTQxLjEgOTAuMi0yNjEuNyAyMTUuOS0zMDUuN0MzMTYuMiAyMzAuMSAzOTYuMyAzMjkuMiAzOTYuMyA0NTEuN3Y2MC45YzAgODIuNS02NyA5Mi4yLTY3IDE0Ni4xczY3IDYzLjYgNjcgMTQ2LjFjMCAxMjIuNS04MC4xIDIyMS42LTIxNS45IDI0NS4zeiIvPjxwYXRoIGZpbGw9IiMwN0MxNjAiIGQ9Ik02ODkuNiA0NTEuN2MwLTEyMi41IDgwLjEtMjIxLjYgMjE1LjktMjQ1LjMtMTI1LjcgNDQtMjE1LjkgMTY0LjYtMjE1LjkgMzA1LjdDMjg5LjEgODg5LjcgNjUwLjggNzI4IDY1MC44IDUxMmMwLTgyLjUtNjctOTIuMi02Ny0xNDYuMXM2Ny02My42IDY3LTE0Ni4xdi02MC45eiIvPjwvc3ZnPg==');
           background-size: contain;
           background-repeat: no-repeat;
           background-position: center;
       }
       .security-badge {
           display: flex;
           align-items: center;
           justify-content: center;
           gap: 8px;
           margin-bottom: 20px;
           color: #07C160;
           font-size: 14px;
       }
       .content-box {
           background-color: #f9f9f9;
           border-radius: 8px;
           padding: 15px;
           margin-bottom: 15px;
           font-size: 15px;
       }
       .content-box h3 {
           margin-bottom: 10px;
           color: #07C160;
           font-size: 16px;
       }
       .target-info {
           background-color: #e8f5e9;
           border-left: 4px solid #07C160;
           padding: 12px;
           margin-bottom: 20px;
           font-size: 14px;
       }
       .btn-container {
           margin-top: auto;
           margin-bottom: 20px;
           display: flex;
           flex-direction: column;
           gap: 12px;
       }
       .btn {
           padding: 12px 25px;
           border: none;
           border-radius: 25px;
           font-size: 16px;
           cursor: pointer;
           transition: all 0.3s;
           font-weight: 500;
           text-align: center;
           width: 100%;
       }
       .btn-primary {
           background-color: #07C160;
           color: white;
       }
       .btn-primary:hover {
           background-color: #06AD56;
       }
       .btn-secondary {
           background-color: #f0f0f0;
           color: #333;
           border: 1px solid #ddd;
       }
       .btn-secondary:hover {
           background-color: #e0e0e0;
       }
       .btn-group {
           background-color: #FFD700;
           color: #8B4513;
           font-weight: bold;
       }
       .btn-group:hover {
           background-color: #FFC800;
       }
       .notice {
           font-size: 13px;
           color: #999;
           text-align: center;
           padding-top: 15px;
           border-top: 1px solid #eee;
       }
       .toast {
           position: fixed;
           top: 50%;
           left: 50%;
           transform: translate(-50%, -50%);
           background-color: rgba(0, 0, 0, 0.7);
           color: white;
           padding: 12px 24px;
           border-radius: 4px;
           z-index: 1001;
           opacity: 0;
           transition: opacity 0.3s;
           pointer-events: none;
           max-width: 80%;
           text-align: center;
       }
       .show {
           opacity: 1;
       }
       #iframe-container {
           position: fixed;
           top: 0;
           left: 0;
           width: 100%;
           height: 100%;
           border: none;
           z-index: 1000;
           background: white;
           display: none;
       }
       .back-btn {
           position: fixed;
           top: 10px;
           left: 10px;
           z-index: 1002;
           padding: 8px 12px;
           background: rgba(255,255,255,0.8);
           color: #07C160;
           border-radius: 4px;
           cursor: pointer;
           font-weight: bold;
           display: none;
       }
       @media (max-width: 480px) {
           .container {
               padding: 15px;
           }
           .btn {
               padding: 12px 20px;
           }
       }
   </style>
</head>
<body>
   <div class="container" id="main-content">
       <div class="logo"></div>
       <div class="security-badge">
           <svg width="16" height="16" viewBox="0 0 24 24" fill="#07C160">
               <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
           </svg>
           <span>腾讯电脑管家安全认证</span>
       </div>

       <div class="target-info" id="target-info">
           正在验证链接安全性...
       </div>
       
       <div class="content-box">
           <h3>安全访问提示</h3>
           <p>腾讯电脑管家已对当前链接进行安全检测，请确认以下信息：</p>
           <ul style="padding-left: 20px; margin-top: 8px;">
               <li>链接来源可信，无恶意代码</li>
               <li>网站身份已验证，非仿冒网站</li>
               <li>数据传输加密，保护您的隐私</li>
           </ul>
       </div>
       
       <div class="content-box">
           <h3>访问须知</h3>
           <p>根据微信安全策略，外部链接需经安全验证。请勿在页面输入个人敏感信息，谨防网络诈骗。</p>
       </div>
       
       <div class="btn-container">
           <button class="btn btn-primary" id="continue-btn">继续访问</button>
           <button class="btn btn-group" id="group-btn">免费恰瓜群</button>
           <button class="btn btn-secondary" id="copy-btn">复制链接</button>
       </div>
       
       <div class="notice">
           <p>腾讯电脑管家 · 护航您的网络安全</p>
       </div>
   </div>
   
   <div id="iframe-container"></div>
   <div class="back-btn" id="back-btn">← 返回</div>
   
   <div class="toast" id="toast">链接已复制</div>
   
   <script>
       // 获取URL参数
       function getQueryParam(name) {
           const urlParams = new URLSearchParams(window.location.search);
           return urlParams.get(name);
       }
       
       // 安全验证URL
       function validateUrl(url) {
           if (!url) return null;
           
           url = url.toString().replace(/[\<\>\"\']/g, '');
           
           try {
               const urlObj = new URL(url);
               if (urlObj.protocol !== 'http:' && urlObj.protocol !== 'https:') {
                   return null;
               }
               return urlObj.toString();
           } catch (e) {
               return null;
           }
       }
       
       // 获取域名信息
       function getDomainInfo(url) {
           try {
               const urlObj = new URL(url);
               return {
                   hostname: urlObj.hostname.replace('www.', ''),
                   domain: urlObj.hostname.replace('www.', '').split('.').slice(-2).join('.')
               };
           } catch (e) {
               return {
                   hostname: url,
                   domain: url
               };
           }
       }
       
       // 复制到剪贴板
       function copyToClipboard(text) {
           return new Promise((resolve, reject) => {
               if (navigator.clipboard) {
                   navigator.clipboard.writeText(text).then(resolve).catch(() => {
                       const input = document.createElement('input');
                       input.value = text;
                       document.body.appendChild(input);
                       input.select();
                       document.execCommand('copy');
                       document.body.removeChild(input);
                       resolve();
                   });
               } else {
                   const input = document.createElement('input');
                   input.value = text;
                   document.body.appendChild(input);
                   input.select();
                   document.execCommand('copy');
                   document.body.removeChild(input);
                   resolve();
               }
           });
       }
       
       // 显示Toast
       function showToast(message, duration = 2000) {
           const toast = document.getElementById('toast');
           toast.textContent = message;
           toast.classList.add('show');
           setTimeout(() => {
               toast.classList.remove('show');
           }, duration);
       }
       
       // 主逻辑
       document.addEventListener('DOMContentLoaded', function() {
           const targetUrl = validateUrl(getQueryParam('url'));
           const continueBtn = document.getElementById('continue-btn');
           const copyBtn = document.getElementById('copy-btn');
           const groupBtn = document.getElementById('group-btn');
           const targetInfo = document.getElementById('target-info');
           const mainContent = document.getElementById('main-content');
           const iframeContainer = document.getElementById('iframe-container');
           const backBtn = document.getElementById('back-btn');
           
           if (!targetUrl) {
               continueBtn.disabled = true;
               copyBtn.disabled = true;
               targetInfo.innerHTML = '<span style="color:#f44336">无效的链接参数，请提供正确的网址</span>';
               showToast('链接参数错误', 3000);
               return;
           }
           
           // 解析域名信息
           const { hostname, domain } = getDomainInfo(targetUrl);
           targetInfo.innerHTML = `即将访问: <strong>${domain}</strong><br>完整网址: <span style="color:#666;font-size:13px">${hostname}</span>`;
           
           // 继续访问按钮 - 全屏嵌入式访问
           continueBtn.addEventListener('click', function() {
               mainContent.style.display = 'none';
               iframeContainer.innerHTML = `
                   <iframe src="${targetUrl}" style="width:100%;height:100%;border:none;"></iframe>
               `;
               iframeContainer.style.display = 'block';
               backBtn.style.display = 'block';
           });
           
           // 返回按钮
           backBtn.addEventListener('click', function() {
               iframeContainer.innerHTML = '';
               iframeContainer.style.display = 'none';
               backBtn.style.display = 'none';
               mainContent.style.display = 'flex';
           });
           
           // 复制链接按钮
           copyBtn.addEventListener('click', function() {
               copyToClipboard(targetUrl)
                   .then(() => showToast('链接已复制到剪贴板'))
                   .catch(() => showToast('复制失败，请手动复制'));
           });
           
           // 免费恰瓜群按钮
           groupBtn.addEventListener('click', function() {
               window.location.href = 'https://work.weixin.qq.com/gm/9f3a841a2cc8c781a94079a5c9bb9ac5';
           });
           
           // 防止被iframe嵌套
           if (window.self !== window.top) {
               try {
                   window.top.location = window.self.location;
               } catch (e) {
                   // 静默处理跨域错误
               }
           }
       });
   </script>
</body>
</html>
